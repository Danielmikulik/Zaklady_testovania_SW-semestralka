*** Settings ***
Documentation                                      Testovanie editácie používateľov
Library                                            SeleniumLibrary
Library                                            RequestsLibrary

*** Variables ***
${url}                                              http://localhost/AkoNaTo/public
${url_login}                                        http://localhost/AkoNaTo/public/login
${url_users}                                        http://localhost/AkoNaTo/public/user
${url_users_page2}                                  http://localhost/AkoNaTo/public/user?page=2
${browser}                                          chrome
${email_admin}                                      admin@admin.com
${email_user}                                       paek@paek.com
${email_edit}                                       test@test.com
${password}                                         password
${name}                                             Nove Meno
${submit button}                                    xpath=//*[@id="app"]/main/div/div/div/div/div[2]/form/div[5]/input


*** Test Cases ***

Zmena pouzivatelskej role
    [Documentation]                                 user -> admin
    Login   ${email_admin}  ${password}
    click element                                   xpath=//*[@id="navbarSupportedContent"]/ul[1]/a[1]
    click element                                   role1
    click element                                   xpath=//*[@id="role1"]/option[2]
    Handle Alert                                    ACCEPT
    reload page
    element text should be                          xpath=//*[@id="role1"]/option[1]    admin

Zobrazenie pouzivatelov userom
    [Documentation]                                 user si chce zobrazit zoznam pouzivatelov. Ocakava 403
    create session                                  forbid    ${url}
    ${response}=                                    get on session     forbid   /user   expected_status=403

Zmena vlastnej pouzivatelskej role adminom
    [Documentation]                                 admin si chce zmenit rolu na usera
    Login   ${email_admin}  ${password}
    go to                                           http://localhost/AkoNaTo/public/user?page=2
    click element                                   role11
    click element                                   xpath=//*[@id="role11"]/option[2]
    Handle Alert                                    ACCEPT
    reload page
    element text should be                          xpath=//*[@id="role11"]/option[1]    admin

Editovanie svojho uctu
    [Documentation]                                 pouzivatel si edituje svoj ucet
    Login   ${email_edit}  ${password}
    click element                                   navbarDropdown
    click element                                   xpath=//*[@id="navbarSupportedContent"]/ul[2]/li/div/a[1]
    clear element text                              name
    input text                                      name       ${name}
    input text                                      email      ${email_edit}
    input password                                  password   ${password}
    input password                                  password_confirmation   ${password}
    click button                                    ${submit button}


*** Keywords ***
Login
    [Documentation]                                 login
    [arguments]     ${arg1}  ${arg2}
    open browser                                    ${url_login}  ${browser}
    input text                                      email       ${arg1}
    input text                                      password    ${arg2}
    click button                                    Login