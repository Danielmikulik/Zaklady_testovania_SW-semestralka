*** Settings ***
Documentation                                      Testovanie pridávania a editovania návodov
Library                                            SeleniumLibrary

*** Variables ***
${url_login}                                        http://localhost/AkoNaTo/public/login
${browser}                                          chrome
${email}                                            admin@admin.com
${email_user}                                       paek@paek.com
${password}                                         password
${title}                                            Title
${description}                                      Description
${step}                                             Toto je krok
${procedure}                                        Toto je postup
${submit button}                                    xpath=//*[@id="app"]/main/div/div/div/div/div[2]/form/div[6]/input
${step_id}                                          -1
${image}                                            C:/Users/splin/Downloads/Robot-framework-logo.png

*** Test Cases ***

Pridanie navodu
    [Documentation]                                 Pridanie návodu bez fotky bez krokov
    Pridat navod bez obrazka    ${email}  ${password}
    click button                                    ${submit button}

Pridanie navodu s krokmi
    [Documentation]                                 Pridanie návodu bez fotky s krokmi
    Pridat navod bez obrazka    ${email}  ${password}
    pridaj a vypln krok bez obrazka
    pridaj a vypln krok bez obrazka
    execute javascript                              window.scrollTo(0,document.body.scrollHeight)
    click button                                    ${submit button}

Pridanie navodu s krokmi a odstranenim
    [Documentation]                                 Pridanie návodu bez fotky s krokmi
    Pridat navod bez obrazka    ${email}  ${password}
    pridaj a vypln krok bez obrazka
    pridaj a vypln krok bez obrazka
    odstran krok
    execute javascript                              window.scrollTo(0,document.body.scrollHeight)
    click button                                    ${submit button}

Pridanie navodu s obrazkom
    [Documentation]                                 Pridanie návodu s fotkami s krokmi
    Pridat navod s obrazkom    ${email}  ${password}  ${image}
    pridaj a vypln krok s obrazkom  ${image}
    pridaj a vypln krok s obrazkom  ${image}
    odstran krok
    odstran krok
    pridaj a vypln krok s obrazkom  ${image}
    odstran krok
    pridaj a vypln krok s obrazkom  ${image}
    execute javascript                              window.scrollTo(0,document.body.scrollHeight)
    click button                                    ${submit button}

Editovanie vlastneho navodu
    [Documentation]                                 Editovanie návodu - zmena názvu a popisu a pridanie kroku
    Login   ${email_user}   ${password}
    click element                                   xpath=//*[@id="navbarSupportedContent"]/ul[1]/a[1]
    click element                                   xpath=//*[@id="app"]/main/div/section/div/div/a[1]
    click element                                   xpath=/html/body/div[2]/div[3]/div[2]/a[1]
    click element                                   edit
    clear element text                              title
    clear element text                              description
    input text                                      title       ${title}
    input text                                      description    ${description}
    pridaj a vypln krok s obrazkom  ${image}
    click button                                    ${submit button}


*** Keywords ***
Login
    [Documentation]                                 login
    [arguments]     ${arg1}  ${arg2}
    open browser                                    ${url_login}  ${browser}
    input text                                      email       ${arg1}
    input text                                      password    ${arg2}
    click button                                    Login



Pridat navod bez obrazka
    [arguments]     ${arg1}  ${arg2}
    Login      ${arg1}  ${arg2}
    Otvor form a vypln nazov popis

Pridat navod s obrazkom
    [arguments]     ${arg1}  ${arg2}  ${arg3}
    Login      ${arg1}  ${arg2}
    Otvor form a vypln nazov popis
    Vloz obrazok navodu     ${arg3}

Vloz obrazok navodu
    [arguments]     ${arg1}
    Choose File     id=image     ${arg1}



Otvor form a vypln nazov popis
    [Documentation]                                 vyplnenie názvu a popisu
    click element                                   //a[contains(text(),'Pridať návod')]
    input text                                      title       ${title}
    input text                                      description    ${description}



pridaj a vypln krok bez obrazka
    [Documentation]                                 pridanie a vyplnenie postupu v kroku
    execute javascript                              window.scrollTo(0,document.body.scrollHeight)
    click element                                   add
    ${step_id}=     convert to integer  ${step_id}
    Set Test Variable   ${step_id}   ${step_id+1}
    input text                                      addstep[${step_id}][step]      ${step}
    input text                                      addstep[${step_id}][procedure]   ${procedure}

pridaj a vypln krok s obrazkom
    pridaj a vypln krok bez obrazka
    [arguments]     ${arg1}
    Choose File     addstep[${step_id}][image_step]     ${arg1}



odstran krok
    [Documentation]                                 odstranenie kroku
    ${remove_button}=   convert to integer  ${step_id}
    Set Test Variable   ${remove_button}   ${remove_button+1}
    Set Test Variable   ${step_id}   ${step_id-1}
    scroll element into view                        xpath=//*[@id="addStep"]/div[${remove_button}]/div[4]/button
    execute javascript                              window.scrollBy(0, 50);
    click button                                    xpath=//*[@id="addStep"]/div[${remove_button}]/div[4]/button


